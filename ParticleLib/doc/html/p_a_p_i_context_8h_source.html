<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ParticleAPI: pAPIContext.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ParticleAPI<span id="projectnumber">&#160;3.0.0</span>
   </div>
   <div id="projectbrief">Performant particle system API in C++ for interactive graphics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4e1baebecbf169d84bf63cb3cdc6641f.html">Particle</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">pAPIContext.h</div></div>
</div><!--header-->
<div class="contents">
<a href="p_a_p_i_context_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><span class="lineno">    1</span><span class="comment">/// PAPIClasses.h</span></div>
<div class="line"><span class="lineno">    2</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">    3</span><span class="comment">/// Copyright 1997-2007, 2022 by David K. McAllister</span></div>
<div class="line"><span class="lineno">    4</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">    5</span><span class="comment">/// Include this file in all applications that use the Particle System API.</span></div>
<div class="line"><span class="lineno">    6</span> </div>
<div class="line"><span class="lineno">    7</span><span class="preprocessor">#</span><span class="preprocessor">ifndef</span> <span class="preprocessor">particle_api_classes_h</span></div>
<div class="line"><span class="lineno">    8</span><span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">particle_api_classes_h</span></div>
<div class="line"><span class="lineno">    9</span> </div>
<div class="line"><span class="lineno">   10</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pDeclarations.h&quot;</span></div>
<div class="line"><span class="lineno">   11</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pError.h&quot;</span></div>
<div class="line"><span class="lineno">   12</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pInternalsIface.h&quot;</span></div>
<div class="line"><span class="lineno">   13</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pParticle.h&quot;</span></div>
<div class="line"><span class="lineno">   14</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pSourceState.h&quot;</span></div>
<div class="line"><span class="lineno">   15</span> </div>
<div class="line"><span class="lineno"><a class="line" href="namespace_p_a_p_i.html">   16</a></span><span class="keyword">namespace</span> <a class="code hl_namespace" href="namespace_p_a_p_i.html">PAPI</a> {</div>
<div class="line"><span class="lineno">   17</span> </div>
<div class="line"><span class="lineno">   18</span><span class="keyword">class</span> PInternalState_t; <span class="comment">// The API-internal struct containing the context&#39;s state. Don&#39;t try to use it.</span></div>
<div class="line"><span class="lineno">   19</span><span class="keyword">struct</span> <a class="code hl_struct" href="struct_p_a_p_i_1_1_particle__t.html">Particle_t</a>;</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span><span class="comment">/// Action List Calls</span></div>
<div class="line"><span class="lineno">   22</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">   23</span><span class="comment">/// These calls create and operate on action lists, which are scripts of many actions</span></div>
<div class="line"><span class="lineno">   24</span><span class="comment">/// to be applied together as a block to the current particle group. An empty action</span></div>
<div class="line"><span class="lineno">   25</span><span class="comment">/// list is first created using GenActionLists(), and is then filled or compiled by calling</span></div>
<div class="line"><span class="lineno">   26</span><span class="comment">/// NewActionList(), then calling Actions, then calling EndActionList(). Once the action</span></div>
<div class="line"><span class="lineno">   27</span><span class="comment">/// list is filled, it is run via CallActionList(). Thus, an action list is sort of a</span></div>
<div class="line"><span class="lineno">   28</span><span class="comment">/// higher-level action. Complex behaviors can be stored in an action list and then</span></div>
<div class="line"><span class="lineno">   29</span><span class="comment">/// called later, even as part of another action list. Action lists cannot be edited.</span></div>
<div class="line"><span class="lineno">   30</span><span class="comment">/// They can only be created or destroyed. To destroy an action list, call DeleteActionLists().</span></div>
<div class="line"><span class="lineno">   31</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">   32</span><span class="comment">/// When in immediate mode (not creating or calling an action list), particles are created</span></div>
<div class="line"><span class="lineno">   33</span><span class="comment">/// with attributes from the current state. However, when particles are created within a</span></div>
<div class="line"><span class="lineno">   34</span><span class="comment">/// NewActionList() / EndActionList() block, they will receive attributes from the state that was</span></div>
<div class="line"><span class="lineno">   35</span><span class="comment">/// current when the action list was created (unlike OpenGL).</span></div>
<div class="line"><span class="lineno">   36</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">   37</span><span class="comment">/// The time step length, dt, uses the value that is current when CallActionList() is executed, not the</span></div>
<div class="line"><span class="lineno">   38</span><span class="comment">/// value of dt when the action list was created. This allows dt to be modified without recompiling action</span></div>
<div class="line"><span class="lineno">   39</span><span class="comment">/// lists. Maybe this isn&#39;t a good idea. If it should be the other way in the future, let me know.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html">   40</a></span><span class="keyword">class</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_action_list__t.html">PContextActionList_t</a> {</div>
<div class="line"><span class="lineno">   41</span><span class="keyword">public</span>:</div>
<div class="line"><span class="lineno">   42</span>    <span class="comment">/// Set the random number seed.</span></div>
<div class="line"><span class="lineno">   43</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   44</span>    <span class="comment">/// The Particle API uses a pseudo-random number generator. The returned number is a function of the numbers already returned. If you start</span></div>
<div class="line"><span class="lineno">   45</span>    <span class="comment">/// two threads, each with a ParticleContext_t they will both generate the same particles if given the same commands. If this is not desired,</span></div>
<div class="line"><span class="lineno">   46</span>    <span class="comment">/// call Seed() on both of them with different seed values.</span></div>
<div class="line"><span class="lineno">   47</span>    <span class="comment">/// The API currently uses the C standard library random number generator, whose state is per-thread, so all contexts in the thread share</span></div>
<div class="line"><span class="lineno">   48</span>    <span class="comment">/// the same random number seed.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a7795db5cf91fd9fb837a83054cfe96c3">   49</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a7795db5cf91fd9fb837a83054cfe96c3">Seed</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> seed);</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    <span class="comment">/// Specify the time step length.</span></div>
<div class="line"><span class="lineno">   52</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   53</span>    <span class="comment">/// The Particle System API uses a discrete time approximation to all actions. This means that actions are applied to the particles at a</span></div>
<div class="line"><span class="lineno">   54</span>    <span class="comment">/// particular instant in time as if the action&#39;s effect accumulated over a small time interval, dt, with the world being constant over the</span></div>
<div class="line"><span class="lineno">   55</span>    <span class="comment">/// interval. The clock is then &quot;ticked&quot; by the length of the interval and the actions can then be reapplied with the particles having their</span></div>
<div class="line"><span class="lineno">   56</span>    <span class="comment">/// updated values. This is the standard method of doing many time-varying simulations in computer science.</span></div>
<div class="line"><span class="lineno">   57</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   58</span>    <span class="comment">/// How does the time step, dt, relate to the application&#39;s frame rate? The easiest method is to apply the actions once per frame. If the</span></div>
<div class="line"><span class="lineno">   59</span>    <span class="comment">/// application prefers to keep time in terms of seconds, dt can be set to (1 / frames_per_second). But more often, it is easier for a time</span></div>
<div class="line"><span class="lineno">   60</span>    <span class="comment">/// unit to be one frame instead of one second. In this case, dt should be 1.0, which is the default.</span></div>
<div class="line"><span class="lineno">   61</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   62</span>    <span class="comment">/// For higher quality, the application can apply particle actions more than once per frame. This provides smoother, more realistic results</span></div>
<div class="line"><span class="lineno">   63</span>    <span class="comment">/// in many subtle ways. Suppose the application wanted to compute three animation steps for each rendered frame. Set dt to 1/3 its previous</span></div>
<div class="line"><span class="lineno">   64</span>    <span class="comment">/// value using TimeStep(), then loop three times over all the action code that gets executed per frame, including the calls to Move. If using</span></div>
<div class="line"><span class="lineno">   65</span>    <span class="comment">/// action lists, this can be simply a loop over the CallActionList() call. The run-time results should be about the same, but with fewer</span></div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">/// discrete approximation artifacts. Depending on how much non-particle work is done per frame, increasing the number of time steps per frame</span></div>
<div class="line"><span class="lineno">   67</span>    <span class="comment">/// may or may not affect the frame rate very much.</span></div>
<div class="line"><span class="lineno">   68</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   69</span>    <span class="comment">/// In terms of numerical integration, particle actions can be thought of as the first derivative of unknown functions dictating the particle</span></div>
<div class="line"><span class="lineno">   70</span>    <span class="comment">/// attributes (such as position) over time. In order to compute the particle attributes these derivative functions must be integrated. Since</span></div>
<div class="line"><span class="lineno">   71</span>    <span class="comment">/// closed form integration doesn&#39;t make sense for most actions, Euler&#39;s method is used instead. Euler&#39;s method is simply the method just</span></div>
<div class="line"><span class="lineno">   72</span>    <span class="comment">/// described - the evaluation of the derivative functions at a particular time and then incrementing the current particle values by these</span></div>
<div class="line"><span class="lineno">   73</span>    <span class="comment">/// derivative results times dt. In Euler&#39;s method, the smaller the dt, the more accurate the results.</span></div>
<div class="line"><span class="lineno">   74</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   75</span>    <span class="comment">/// Unlike with other state setting calls, action lists execute using the current dt value set by TimeStep(), rather than the time step value</span></div>
<div class="line"><span class="lineno">   76</span>    <span class="comment">/// that was current when the action list was created. Making action lists independent of time step size allows the time step to be changed</span></div>
<div class="line"><span class="lineno">   77</span>    <span class="comment">/// without recompiling the action list.</span></div>
<div class="line"><span class="lineno">   78</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   79</span>    <span class="comment">/// In general, it is folly to call TimeStep() in between other actions of a simulation frame. For example, calling Bounce(); TimeStep(); Move();</span></div>
<div class="line"><span class="lineno">   80</span>    <span class="comment">/// can cause particles to pass through the bounce domain instead of bouncing off it.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a0330f623cbd0686e4fd84abe6f2a3828">   81</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a0330f623cbd0686e4fd84abe6f2a3828">TimeStep</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> new_dt);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">/// Return the current time step, as set with TimeStep()</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a777e90940cf960323ed04aace37315b8">   84</a></span>    <span class="keywordtype">float</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a777e90940cf960323ed04aace37315b8">GetTimeStep</a>() <span class="keyword">const</span>;</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="comment">/// Execute the specified action list on the current particle group.</span></div>
<div class="line"><span class="lineno">   87</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   88</span>    <span class="comment">/// Call the action functions as specified when this action list was created with NewActionList(). The actions are executed with the state</span></div>
<div class="line"><span class="lineno">   89</span>    <span class="comment">/// values in effect when the action list was created, except the context&#39;s current value of dt is used, not the value of dt when the list</span></div>
<div class="line"><span class="lineno">   90</span>    <span class="comment">/// was created.</span></div>
<div class="line"><span class="lineno">   91</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   92</span>    <span class="comment">/// CallActionList() is the only function other than actions that can be stored in an action list. This allows action lists to become atomic</span></div>
<div class="line"><span class="lineno">   93</span>    <span class="comment">/// operations in more complex action lists.</span></div>
<div class="line"><span class="lineno">   94</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">   95</span>    <span class="comment">/// When calling CallActionList() during the creation of a new action list, action_list_num does not need to indicate an existing action list.</span></div>
<div class="line"><span class="lineno">   96</span>    <span class="comment">/// At all other times it is an error for action_list_num to not indicate an existing (generated) action list.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a1fd276780b4ea073d187576f2459e1b4">   97</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a1fd276780b4ea073d187576f2459e1b4">CallActionList</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> action_list_num);</div>
<div class="line"><span class="lineno">   98</span> </div>
<div class="line"><span class="lineno">   99</span>    <span class="comment">/// Delete one or more consecutive action lists.</span></div>
<div class="line"><span class="lineno">  100</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  101</span>    <span class="comment">/// Deletes action_list_count action lists, with action_list_num being the list number of the first one. The lists must be numbered</span></div>
<div class="line"><span class="lineno">  102</span>    <span class="comment">/// sequentially, and must all exist. This removes the specified action lists from existence.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#abef97a9286180f1e53cb81a5c17e6205">  103</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#abef97a9286180f1e53cb81a5c17e6205">DeleteActionLists</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> action_list_num,      <span class="comment">///&lt; The handle of the first action list to delete</span></div>
<div class="line"><span class="lineno">  104</span>                           <span class="keyword">const</span> <span class="keywordtype">int</span> action_list_count = 1 <span class="comment">///&lt; How many action lists to delete</span></div>
<div class="line"><span class="lineno">  105</span>    );</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    <span class="comment">/// End the creation of a new action list.</span></div>
<div class="line"><span class="lineno">  108</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  109</span>    <span class="comment">/// Obviously, it is an error to call EndActionList() without a corresponding call to NewActionList().</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#af0ffaad952c3b2df8bc7161deb9f9127">  110</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#af0ffaad952c3b2df8bc7161deb9f9127">EndActionList</a>();</div>
<div class="line"><span class="lineno">  111</span> </div>
<div class="line"><span class="lineno">  112</span>    <span class="comment">/// Generate a block of empty action lists.</span></div>
<div class="line"><span class="lineno">  113</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  114</span>    <span class="comment">/// Returns the action list number of the first allocated list. All list numbers are in sequential order starting with the first list.</span></div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">/// Valid action list numbers are non-negative.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a93f9538f37bfc3bba040d658fa2847a6">  116</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#a93f9538f37bfc3bba040d658fa2847a6">GenActionLists</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> action_list_count = 1 <span class="comment">///&lt; How many action lists to create</span></div>
<div class="line"><span class="lineno">  117</span>    );</div>
<div class="line"><span class="lineno">  118</span> </div>
<div class="line"><span class="lineno">  119</span>    <span class="comment">/// Begin the creation of the specified action list.</span></div>
<div class="line"><span class="lineno">  120</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  121</span>    <span class="comment">/// The action_list_num must have already been generated using GenActionLists. Most calls other than actions and state setting calls</span></div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">/// cannot be made between a call to NewActionList() and the corresponding call to EndActionList().</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="comment">/// If called on an action list that has previously been defined, the previous contents of the action list are destroyed and the action</span></div>
<div class="line"><span class="lineno">  124</span>    <span class="comment">/// list will be created anew. This is as with glNewActionList() in OpenGL.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#aec2d30f3336b2be2ab34ba3cccc55d53">  125</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#aec2d30f3336b2be2ab34ba3cccc55d53">NewActionList</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> action_list_num);</div>
<div class="line"><span class="lineno">  126</span> </div>
<div class="line"><span class="lineno">  127</span><span class="keyword">protected</span>:</div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">  128</a></span>    std::shared_ptr&lt;PInternalState_t&gt; <a class="code hl_variable" href="class_p_a_p_i_1_1_p_context_action_list__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PS</a>;                     <span class="comment">// The internal API data for this context is stored here.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_action_list__t.html#aff0b6907e8741a16ef627f960272b342">  129</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_action_list__t.html#aff0b6907e8741a16ef627f960272b342">InternalSetup</a>(std::shared_ptr&lt;PInternalState_t&gt; Sr); <span class="comment">// Calls this after construction to set up the PS pointer</span></div>
<div class="line"><span class="lineno">  130</span>};</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span><span class="comment">/// This class contains the API calls that operate on particle groups.</span></div>
<div class="line"><span class="lineno">  133</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  134</span><span class="comment">/// A particle group is first created using GenParticleGroups(), which will create a sequentially-numbered</span></div>
<div class="line"><span class="lineno">  135</span><span class="comment">/// set of particle groups and return the identifying number of the first generated</span></div>
<div class="line"><span class="lineno">  136</span><span class="comment">/// particle group. You specify which group is current using CurrentGroup(). Unless otherwise</span></div>
<div class="line"><span class="lineno">  137</span><span class="comment">/// stated, all other commands operate on the current particle group. The maximum number</span></div>
<div class="line"><span class="lineno">  138</span><span class="comment">/// of particles in the group is specified using SetMaxParticles(). The particle group</span></div>
<div class="line"><span class="lineno">  139</span><span class="comment">/// is then acted upon using the Actions.</span></div>
<div class="line"><span class="lineno">  140</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  141</span><span class="comment">/// After the actions have been applied, the particles are rendered. This is done at</span></div>
<div class="line"><span class="lineno">  142</span><span class="comment">/// the same stage of the application&#39;s execution as drawing other geometry. To draw</span></div>
<div class="line"><span class="lineno">  143</span><span class="comment">/// a particle group in OpenGL, the application calls GetParticles() or GetParticlePointer()</span></div>
<div class="line"><span class="lineno">  144</span><span class="comment">/// functions to get the vertex data, then sends it to OpenGL. When a particle group</span></div>
<div class="line"><span class="lineno">  145</span><span class="comment">/// is no longer needed, it is deleted using DeleteParticleGroups().</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html">  146</a></span><span class="keyword">class</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_particle_group__t.html">PContextParticleGroup_t</a> {</div>
<div class="line"><span class="lineno">  147</span><span class="keyword">public</span>:</div>
<div class="line"><span class="lineno">  148</span>    <span class="comment">/// Copy particles from the specified group into the current group.</span></div>
<div class="line"><span class="lineno">  149</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  150</span>    <span class="comment">/// Copy particles from the specified particle group, p_src_group_num, to the current particle group. Only copy_count particles, starting</span></div>
<div class="line"><span class="lineno">  151</span>    <span class="comment">/// with number index, are copied. Of course, the number of particles actually copied is bounded by the available space in the current</span></div>
<div class="line"><span class="lineno">  152</span>    <span class="comment">/// particle group, and the number of particles actually in the source particle group. The particles are added, in sequential order, to the</span></div>
<div class="line"><span class="lineno">  153</span>    <span class="comment">/// end of the current group. The current group&#39;s BirthCallback(), if any, is called for each particle added to the list.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a7c117f3b121b6709021ecf4036a3be53">  154</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a7c117f3b121b6709021ecf4036a3be53">CopyGroup</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> p_src_group_num, <span class="comment">///&lt; group number of the source particle group</span></div>
<div class="line"><span class="lineno">  155</span>                   <span class="keyword">const</span> size_t index,        <span class="comment">///&lt; index of the first particle in the source list to copy</span></div>
<div class="line"><span class="lineno">  156</span>                   <span class="keyword">const</span> size_t copy_count    <span class="comment">///&lt; copy at most this many particles</span></div>
<div class="line"><span class="lineno">  157</span>    );</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span>    <span class="comment">/// Change which group is current.</span></div>
<div class="line"><span class="lineno">  160</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  161</span>    <span class="comment">/// Makes p_group_num be the current particle group to which all actions and commands apply.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af1ddcf82756a87ded68e545cad3e8d90">  162</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af1ddcf82756a87ded68e545cad3e8d90">CurrentGroup</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> p_group_num);</div>
<div class="line"><span class="lineno">  163</span> </div>
<div class="line"><span class="lineno">  164</span>    <span class="comment">/// Delete one or more consecutive particle groups.</span></div>
<div class="line"><span class="lineno">  165</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  166</span>    <span class="comment">/// Deletes p_group_count particle groups, with p_group_num being the particle group number of the first one. The groups must be numbered</span></div>
<div class="line"><span class="lineno">  167</span>    <span class="comment">/// sequentially, and must all exist. This removes the specified particle groups from existence (and all their particles). It does not merely</span></div>
<div class="line"><span class="lineno">  168</span>    <span class="comment">/// change the number of existing particles or the maximum size of the group.</span></div>
<div class="line"><span class="lineno">  169</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  170</span>    <span class="comment">/// The DeathCallback is NOT called for the particles in the deleted groups. Should I change this?</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a49aab2a3887103f5bbeccebef529a31b">  171</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a49aab2a3887103f5bbeccebef529a31b">DeleteParticleGroups</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> p_group_num,      <span class="comment">///&lt; handle of the first particle group to delete</span></div>
<div class="line"><span class="lineno">  172</span>                              <span class="keyword">const</span> <span class="keywordtype">int</span> p_group_count = 1 <span class="comment">///&lt; delete this many groups</span></div>
<div class="line"><span class="lineno">  173</span>    );</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    <span class="comment">/// Create particle groups, each with a maximum of max_particles.</span></div>
<div class="line"><span class="lineno">  176</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  177</span>    <span class="comment">/// Generates p_group_count new particle groups and returns the particle group number of the first one. The groups are numbered sequentially,</span></div>
<div class="line"><span class="lineno">  178</span>    <span class="comment">/// beginning with the number returned. Each particle group is set to have at most max_particles particles. Call SetMaxParticles() to change this.</span></div>
<div class="line"><span class="lineno">  179</span>    <span class="comment">/// Particle group numbers of groups that have been deleted (using DeleteParticleGroups()) might be reused by GenParticleGroups().</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ad6b48bdc6e998672ff0df1c4f581230b">  180</a></span>    <span class="keywordtype">int</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ad6b48bdc6e998672ff0df1c4f581230b">GenParticleGroups</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> p_group_count = 1,   <span class="comment">///&lt; generate this many groups</span></div>
<div class="line"><span class="lineno">  181</span>                          <span class="keyword">const</span> size_t max_particles = 0 <span class="comment">///&lt; each created group can have this many particles</span></div>
<div class="line"><span class="lineno">  182</span>    );</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    <span class="comment">/// Returns the number of particles existing in the current group.</span></div>
<div class="line"><span class="lineno">  185</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  186</span>    <span class="comment">/// The number returned is less than or equal to the group&#39;s max_particles.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#abbcc2cd2340624560e3b2cf6e9d5cb0c">  187</a></span>    size_t <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#abbcc2cd2340624560e3b2cf6e9d5cb0c">GetGroupCount</a>();</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">/// Return the maximum number of particles allowed in the current group.</span></div>
<div class="line"><span class="lineno">  190</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  191</span>    <span class="comment">/// This can be changed with SetMaxParticles().</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab94327f011a4f3713cb0941abe0da63f">  192</a></span>    size_t <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab94327f011a4f3713cb0941abe0da63f">GetMaxParticles</a>();</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">/// Copy particles from the current group to application memory.</span></div>
<div class="line"><span class="lineno">  195</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  196</span>    <span class="comment">/// Copies at most count particles beginning with the index-th particle in the current particle group into memory already allocated by the</span></div>
<div class="line"><span class="lineno">  197</span>    <span class="comment">/// application. Three floats are returned for the position of each particle, representing its x,y,z location. Four floats are returned for</span></div>
<div class="line"><span class="lineno">  198</span>    <span class="comment">/// the color of each particle, representing its R,G,B,A color. Three floats are returned for the velocity of each particle, representing</span></div>
<div class="line"><span class="lineno">  199</span>    <span class="comment">/// its dx,dy,dz direction vector. Three floats are returned for the size of each particle, representing whatever the application wants them</span></div>
<div class="line"><span class="lineno">  200</span>    <span class="comment">/// to. One float is returned for the age of each particle.</span></div>
<div class="line"><span class="lineno">  201</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  202</span>    <span class="comment">/// GetParticles() returns the number of particles copied to application memory. Of course, the number of particles actually returned is</span></div>
<div class="line"><span class="lineno">  203</span>    <span class="comment">/// bounded by count and by the number of particles actually in the particle group minus index.</span></div>
<div class="line"><span class="lineno">  204</span>    <span class="comment">/// If verts, color, vel, size or age is NULL then the respective field will not be returned. index and count must be at least 0 and less</span></div>
<div class="line"><span class="lineno">  205</span>    <span class="comment">/// than the number of particles. index + count must be less than the number of particles.</span></div>
<div class="line"><span class="lineno">  206</span>    <span class="comment">/// As with all arrays in C, the index of the first particle is zero.</span></div>
<div class="line"><span class="lineno">  207</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  208</span>    <span class="comment">/// The following code gets the position of all particles:</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">/// int cnt = GetGroupCount();</span></div>
<div class="line"><span class="lineno">  211</span>    <span class="comment">/// float *ppos = new float[cnt * 3];</span></div>
<div class="line"><span class="lineno">  212</span>    <span class="comment">/// int num_ret = GetParticles(0, cnt, ppos);</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af589e7bdf0c3280bce5442782563ae6b">  213</a></span>    size_t <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af589e7bdf0c3280bce5442782563ae6b">GetParticles</a>(<span class="keyword">const</span> size_t index,  <span class="comment">///&lt; index of the first particle to return</span></div>
<div class="line"><span class="lineno">  214</span>                        <span class="keyword">const</span> size_t count,  <span class="comment">///&lt; max number of particles to return</span></div>
<div class="line"><span class="lineno">  215</span>                        <span class="keywordtype">float</span>* position,     <span class="comment">///&lt; location to store 3 floats per particle for position</span></div>
<div class="line"><span class="lineno">  216</span>                        <span class="keyword">const</span> <span class="keywordtype">bool</span> getAlpha, <span class="comment">///&lt; true to get a float4 color with alpha; false to get a float3 color</span></div>
<div class="line"><span class="lineno">  217</span>                        <span class="keywordtype">float</span>* color = NULL, <span class="comment">///&lt; location to store 3 or 4 floats per particle for color and optionally alpha</span></div>
<div class="line"><span class="lineno">  218</span>                        <span class="keywordtype">float</span>* vel = NULL,   <span class="comment">///&lt; location to store 3 floats per particle for velocity</span></div>
<div class="line"><span class="lineno">  219</span>                        <span class="keywordtype">float</span>* size = NULL,  <span class="comment">///&lt; location to store 3 floats per particle for size</span></div>
<div class="line"><span class="lineno">  220</span>                        <span class="keywordtype">float</span>* age = NULL    <span class="comment">///&lt; location to store 1 float per particle for age</span></div>
<div class="line"><span class="lineno">  221</span>    );</div>
<div class="line"><span class="lineno">  222</span> </div>
<div class="line"><span class="lineno">  223</span>    <span class="comment">/// Return a pointer to particle data stored in API memory.</span></div>
<div class="line"><span class="lineno">  224</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  225</span>    <span class="comment">/// This function exposes the internal storage of the particle data to the application. It provides a much higher performance way to render</span></div>
<div class="line"><span class="lineno">  226</span>    <span class="comment">/// particles because it avoids copying. In fact, the returned pointers can typically be passed directly to OpenGL or D3D without the</span></div>
<div class="line"><span class="lineno">  227</span>    <span class="comment">/// application ever owning a copy of the data.</span></div>
<div class="line"><span class="lineno">  228</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  229</span>    <span class="comment">/// Writing to the returned memory is obviously unsafe. There may be auxiliary data that depend on the current values of the particle data.</span></div>
<div class="line"><span class="lineno">  230</span>    <span class="comment">/// You can try it if you want to, but your code may break against future API versions.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a75cdf009111297f02b803ac08d0a4213">  231</a></span>    size_t <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a75cdf009111297f02b803ac08d0a4213">GetParticlePointer</a>(<span class="keyword">const</span> <span class="keywordtype">float</span>*&amp; ptr, <span class="comment">///&lt; the returned pointer to the particle data</span></div>
<div class="line"><span class="lineno">  232</span>                              size_t&amp; stride,    <span class="comment">///&lt; the number of floats from one particle&#39;s value to the next particle&#39;s value</span></div>
<div class="line"><span class="lineno">  233</span>                              size_t&amp; pos3Ofs,   <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s position parameter</span></div>
<div class="line"><span class="lineno">  234</span>                              size_t&amp; posB3Ofs,  <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s positionB parameter</span></div>
<div class="line"><span class="lineno">  235</span>                              size_t&amp; size3Ofs,  <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s size parameter</span></div>
<div class="line"><span class="lineno">  236</span>                              size_t&amp; vel3Ofs,   <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s velocity parameter</span></div>
<div class="line"><span class="lineno">  237</span>                              size_t&amp; velB3Ofs,  <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s velocityB parameter</span></div>
<div class="line"><span class="lineno">  238</span>                              size_t&amp; color3Ofs, <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s color parameter</span></div>
<div class="line"><span class="lineno">  239</span>                              size_t&amp; alpha1Ofs, <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s alpha parameter</span></div>
<div class="line"><span class="lineno">  240</span>                              size_t&amp; age1Ofs,   <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s age parameter</span></div>
<div class="line"><span class="lineno">  241</span>                              size_t&amp; up3Ofs,    <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s up parameter</span></div>
<div class="line"><span class="lineno">  242</span>                              size_t&amp; rvel3Ofs,  <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s rvel parameter</span></div>
<div class="line"><span class="lineno">  243</span>                              size_t&amp; upB3Ofs,   <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s upB parameter</span></div>
<div class="line"><span class="lineno">  244</span>                              size_t&amp; mass1Ofs,  <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s mass parameter</span></div>
<div class="line"><span class="lineno">  245</span>                              size_t&amp; data1Ofs   <span class="comment">///&lt; the number of floats from returned ptr to the first particle&#39;s data parameter, which is a 32-bit integer</span></div>
<div class="line"><span class="lineno">  246</span>    );</div>
<div class="line"><span class="lineno">  247</span> </div>
<div class="line"><span class="lineno">  248</span>    <span class="comment">/// Change the maximum number of particles in the current group.</span></div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  250</span>    <span class="comment">/// If necessary, this will delete particles from the end of the particle group, but no other particles will be deleted.</span></div>
<div class="line"><span class="lineno">  251</span>    <span class="comment">/// The DeathCallback() of deleted particles WILL be called.</span></div>
<div class="line"><span class="lineno">  252</span>    <span class="comment">/// Call SetMaxParticles(0) to empty the group.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ac89a60f3740531bba39533bf75d3e990">  253</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ac89a60f3740531bba39533bf75d3e990">SetMaxParticles</a>(<span class="keyword">const</span> size_t max_count);</div>
<div class="line"><span class="lineno">  254</span> </div>
<div class="line"><span class="lineno">  255</span>    <span class="comment">/// Specify a particle creation callback.</span></div>
<div class="line"><span class="lineno">  256</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">/// Specify a callback function within your code that should be called every time a particle is created. The callback is associated only</span></div>
<div class="line"><span class="lineno">  258</span>    <span class="comment">/// with the particle group that is current at the time you make the BirthCallback() call. You can optionally pass a 32-bit value</span></div>
<div class="line"><span class="lineno">  259</span>    <span class="comment">/// that could be a handle to arbitrary data of your own, which is returned to your callback.</span></div>
<div class="line"><span class="lineno">  260</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  261</span>    <span class="comment">/// The Particle_t struct is passed back to your callback function, so your application will have to include &quot;Particle/pParticle.h&quot;.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a2875a5464c1810fa11a88e057b56cd84">  262</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a2875a5464c1810fa11a88e057b56cd84">BirthCallback</a>(P_PARTICLE_CALLBACK callback, <span class="comment">///&lt; Pointer to function of yours to call</span></div>
<div class="line"><span class="lineno">  263</span>                       <a class="code hl_typedef" href="namespace_p_a_p_i.html#a8f210e08b253efc043296efeaf9ddda3">pdata_t</a> group_data = 0        <span class="comment">///&lt; Arbitrary per-group data of yours to pass into your function</span></div>
<div class="line"><span class="lineno">  264</span>    );</div>
<div class="line"><span class="lineno">  265</span> </div>
<div class="line"><span class="lineno">  266</span>    <span class="comment">/// Specify a particle death callback.</span></div>
<div class="line"><span class="lineno">  267</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  268</span>    <span class="comment">/// Specify a callback function within your code that should be called every time a particle is killed. The callback is associated only</span></div>
<div class="line"><span class="lineno">  269</span>    <span class="comment">/// with the particle group that is current at the time you make the DeathCallback() call. You can optionally pass a pointer to arbitrary</span></div>
<div class="line"><span class="lineno">  270</span>    <span class="comment">/// data of your own, which is returned to your callback.</span></div>
<div class="line"><span class="lineno">  271</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  272</span>    <span class="comment">/// The Particle_t struct is passed back to your callback function, so your application will have to include &quot;Particle/pParticle.h&quot;.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a0c0eaac8b9d6b1e5d2520173ee936522">  273</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a0c0eaac8b9d6b1e5d2520173ee936522">DeathCallback</a>(P_PARTICLE_CALLBACK callback, <span class="comment">///&lt; Pointer to function of yours to call</span></div>
<div class="line"><span class="lineno">  274</span>                       <a class="code hl_typedef" href="namespace_p_a_p_i.html#a8f210e08b253efc043296efeaf9ddda3">pdata_t</a> group_data = 0        <span class="comment">///&lt; Arbitrary per-group data of yours to pass into your function</span></div>
<div class="line"><span class="lineno">  275</span>    );</div>
<div class="line"><span class="lineno">  276</span> </div>
<div class="line"><span class="lineno">  277</span>    <span class="comment">/// Set the number of particles that fit in the CPU&#39;s cache</span></div>
<div class="line"><span class="lineno">  278</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  279</span>    <span class="comment">/// You probably don&#39;t need to call this function. It is the number of bytes in the working set. Most action lists apply several actions to</span></div>
<div class="line"><span class="lineno">  280</span>    <span class="comment">/// the working set of particles, then load the next working set of particles and apply the same actions to them. This allows particles to</span></div>
<div class="line"><span class="lineno">  281</span>    <span class="comment">/// stay resident in the CPU&#39;s cache for a longer period of time, potentially increasing performance dramatically.</span></div>
<div class="line"><span class="lineno">  282</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  283</span>    <span class="comment">/// You specify the working set size in bytes.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a1112f0655c7c1b62f870511b8afef9d7">  284</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a1112f0655c7c1b62f870511b8afef9d7">SetWorkingSetSize</a>(<span class="keyword">const</span> <span class="keywordtype">int</span> set_size_bytes);</div>
<div class="line"><span class="lineno">  285</span> </div>
<div class="line"><span class="lineno">  286</span><span class="keyword">protected</span>:</div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">  287</a></span>    std::shared_ptr&lt;PInternalState_t&gt; <a class="code hl_variable" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PS</a>;                     <span class="comment">// The internal API data for this context is stored here.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#aff0b6907e8741a16ef627f960272b342">  288</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_particle_group__t.html#aff0b6907e8741a16ef627f960272b342">InternalSetup</a>(std::shared_ptr&lt;PInternalState_t&gt; Sr); <span class="comment">// Calls this after construction to set up the PS pointer</span></div>
<div class="line"><span class="lineno">  289</span>};</div>
<div class="line"><span class="lineno">  290</span> </div>
<div class="line"><span class="lineno">  291</span><span class="comment">/// This class contains the Action API. It includes the legacy, less performant, but perhaps more elegant Action API.</span></div>
<div class="line"><span class="lineno">  292</span><span class="comment">/// It also includes the inline actions API. This allows an action to be applied to a particle using a function call that will be inlined.</span></div>
<div class="line"><span class="lineno">  293</span><span class="comment">/// This enables a new programming model with a normally parallel for_each loop around a per-particle list of actions.</span></div>
<div class="line"><span class="lineno">  294</span><span class="comment">/// It also enables the inline actions functions to be called from CUDA threads, or equivalent, allowing GPU acceleration.</span></div>
<div class="line"><span class="lineno">  295</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  296</span><span class="comment">/// Actions modify the position, color, velocity, size, age, and other attributes of</span></div>
<div class="line"><span class="lineno">  297</span><span class="comment">/// particles. All actions apply to the current particle group, as set by CurrentGroup().</span></div>
<div class="line"><span class="lineno">  298</span><span class="comment">/// Some actions will add particles to or delete them from the particle group, and others</span></div>
<div class="line"><span class="lineno">  299</span><span class="comment">/// will modify the particles in other ways. Typically, a series of actions will be</span></div>
<div class="line"><span class="lineno">  300</span><span class="comment">/// applied to each particle group once (or more) per rendered frame.</span></div>
<div class="line"><span class="lineno">  301</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  302</span><span class="comment">/// Remember that the amount of effect of an action call depends on the time step size,</span></div>
<div class="line"><span class="lineno">  303</span><span class="comment">/// dt, as set by \ref TimeStep. See TimeStep() for an explanation of time steps.</span></div>
<div class="line"><span class="lineno">  304</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  305</span><span class="comment">/// Some functions have parameters with a default value of the constant P_EPS. P_EPS is a very small</span></div>
<div class="line"><span class="lineno">  306</span><span class="comment">/// floating point constant that is most often used as the default value of the epsilon</span></div>
<div class="line"><span class="lineno">  307</span><span class="comment">/// parameter to actions whose influence on a particle is relative to the inverse square</span></div>
<div class="line"><span class="lineno">  308</span><span class="comment">/// of its distance from something. If that distance is very small, the amount of influence</span></div>
<div class="line"><span class="lineno">  309</span><span class="comment">/// approaches infinity. Since all actions are computed using Euler&#39;s method, this can</span></div>
<div class="line"><span class="lineno">  310</span><span class="comment">/// cause unsatisfying results in which particles are accelerated way too much. So this</span></div>
<div class="line"><span class="lineno">  311</span><span class="comment">/// epsilon parameter is added to the distance before taking its inverse square, thus</span></div>
<div class="line"><span class="lineno">  312</span><span class="comment">/// keeping the acceleration within reasonable limits. By varying epsilon, you specify</span></div>
<div class="line"><span class="lineno">  313</span><span class="comment">/// what is reasonable. Larger epsilon make particles accelerate less.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html">  314</a></span><span class="keyword">class</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PContextActions_t</a> {</div>
<div class="line"><span class="lineno">  315</span><span class="keyword">public</span>:</div>
<div class="line"><span class="lineno">  316</span>    <span class="comment">/// The inline actions API calls take a Particle_t as the first argument. Otherwise the call signatures match those of the legacy API.</span></div>
<div class="line"><span class="lineno"><a class="line" href="p_a_p_i_context_8h.html#a2c254ab6557fca6df7f69f6d09983747">  317</a></span><span class="preprocessor">#</span><span class="preprocessor">define</span> <span class="preprocessor">PARG</span> <span class="preprocessor">Particle_t</span> <span class="preprocessor">&amp;</span><span class="preprocessor">m</span><span class="preprocessor">,</span></div>
<div class="line"><span class="lineno">  318</span><span class="preprocessor">#</span><span class="preprocessor">include</span> <span class="preprocessor">&quot;Particle/pActionDecls.h&quot;</span></div>
<div class="line"><span class="lineno">  319</span><span class="preprocessor">#</span><span class="preprocessor">undef</span> <span class="preprocessor">PARG</span></div>
<div class="line"><span class="lineno">  320</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno">  321</span>    <span class="comment">//#define PARG</span></div>
<div class="line"><span class="lineno">  322</span>    <span class="comment">//#include &quot;Particle/pActionDecls.h&quot;</span></div>
<div class="line"><span class="lineno">  323</span>    <span class="comment">//#undef PARG</span></div>
<div class="line"><span class="lineno">  324</span> </div>
<div class="line"><span class="lineno">  325</span>    <span class="comment">/// Delete particles tagged to be killed by inline P.I.KillOld(), P.I.Sink(), and P.I.SinkVelocity()</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a13aacda27ea8731db4e9fdbcf9a65687">  326</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a13aacda27ea8731db4e9fdbcf9a65687">CommitKills</a>();</div>
<div class="line"><span class="lineno">  327</span> </div>
<div class="line"><span class="lineno">  328</span>    <span class="comment">/// Sort the particles by their projection onto the look vector.</span></div>
<div class="line"><span class="lineno">  329</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  330</span>    <span class="comment">/// Many rendering systems require rendering transparent particles in back-to-front order. The ordering is defined by the eye point and the</span></div>
<div class="line"><span class="lineno">  331</span>    <span class="comment">/// look vector. These are the same vectors you pass into gluLookAt(), for example. The vector from the eye point to each particle&#39;s</span></div>
<div class="line"><span class="lineno">  332</span>    <span class="comment">/// position is computed, then projected onto the look vector. Particles are sorted back-to-front by the result of this dot product.</span></div>
<div class="line"><span class="lineno">  333</span>    <span class="comment">/// Setting clamp_negative to true speeds up sorting time. Particles behind the viewer won&#39;t be visible so their relative order doesn&#39;t matter.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a640597dc6376e993409b6cb331b219b0">  334</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a640597dc6376e993409b6cb331b219b0">Sort</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_vec.html">pVec</a>&amp; eye,                  <span class="comment">///&lt; eye point is a point on the line the particles project onto</span></div>
<div class="line"><span class="lineno">  335</span>              <span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_vec.html">pVec</a>&amp; look_dir,             <span class="comment">///&lt; direction vector of projection line; does not need to be normalized</span></div>
<div class="line"><span class="lineno">  336</span>              <span class="keyword">const</span> <span class="keywordtype">bool</span> front_to_back = <span class="keyword">false</span>, <span class="comment">///&lt; true to sort in front-to-back order instead of back-to-front</span></div>
<div class="line"><span class="lineno">  337</span>              <span class="keyword">const</span> <span class="keywordtype">bool</span> clamp_negative = <span class="keyword">false</span> <span class="comment">///&lt; true to set negative dot product values to zero before sorting</span></div>
<div class="line"><span class="lineno">  338</span>    );</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span>    <span class="comment">/// Add particles with positions in the specified domain.</span></div>
<div class="line"><span class="lineno">  341</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  342</span>    <span class="comment">/// Adds new particles to the current particle group. The particle positions are chosen from the given domain. All the other particle</span></div>
<div class="line"><span class="lineno">  343</span>    <span class="comment">/// attributes such as color and velocity are chosen according to their current domains.</span></div>
<div class="line"><span class="lineno">  344</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  345</span>    <span class="comment">/// When the Source action is called within an action list, the particle attribute domains used are those that were current when the Source</span></div>
<div class="line"><span class="lineno">  346</span>    <span class="comment">/// command was called within the NewActionList() / EndActionList() block instead of when CallActionList() was called. Note that this is unlike OpenGL</span></div>
<div class="line"><span class="lineno">  347</span>    <span class="comment">/// display lists.</span></div>
<div class="line"><span class="lineno">  348</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  349</span>    <span class="comment">/// If particle_rate / dt is not an integer then Source() adjusts the number of particles to add during this time step so that the average</span></div>
<div class="line"><span class="lineno">  350</span>    <span class="comment">/// number added per unit time is particle_rate.</span></div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">/// If too few particles seem to be added each frame, it is probably because the particle group is already full. If this is bad, you can</span></div>
<div class="line"><span class="lineno">  353</span>    <span class="comment">/// grow the group using SetMaxParticles().</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a1c29fe77db016b32899474911e9c6c60">  354</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a1c29fe77db016b32899474911e9c6c60">Source</a>(<span class="keyword">const</span> <span class="keywordtype">float</span> particle_rate, <span class="comment">///&lt; how many particles to add per unit time</span></div>
<div class="line"><span class="lineno">  355</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_domain.html">pDomain</a>&amp; dom,        <span class="comment">///&lt; particle positions are chosen from this domain</span></div>
<div class="line"><span class="lineno">  356</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_source_state.html">pSourceState</a>&amp; SrcSt  <span class="comment">///&lt; all other particle attributes are chosen from this source state</span></div>
<div class="line"><span class="lineno">  357</span>    );</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="comment">/// Add a single particle at the specified location.</span></div>
<div class="line"><span class="lineno">  360</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  361</span>    <span class="comment">/// This action mostly is a shorthand for Source(1, PDPoint(x, y, z)) but allows different callback data per particle.</span></div>
<div class="line"><span class="lineno">  362</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  363</span>    <span class="comment">/// When called in immediate mode, this action uses a slightly faster method to add a single particle to the current particle group.</span></div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">/// Also when in immediate mode, exactly one particle will be added per call, instead of an average of 1 / dt particles being added.</span></div>
<div class="line"><span class="lineno">  365</span>    <span class="comment">/// Particle attributes are chosen according to their current domains, as with Source.</span></div>
<div class="line"><span class="lineno">  366</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  367</span>    <span class="comment">/// The user data attribute is an exception. It always takes the attribute from the optional data parameter to Vertex(), overriding the source state value.</span></div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">///</span></div>
<div class="line"><span class="lineno">  369</span>    <span class="comment">/// This call is patterned after the glVertex() calls. It is useful for creating a particle group with exactly specified initial positions.</span></div>
<div class="line"><span class="lineno">  370</span>    <span class="comment">/// For example, you can specify a geometrical model using Vertex calls, and then explode or deform it.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a24c3e50da39c97b441a85806128e9065">  371</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a24c3e50da39c97b441a85806128e9065">Vertex</a>(<span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_vec.html">pVec</a>&amp; v,             <span class="comment">///&lt; position of particle to create</span></div>
<div class="line"><span class="lineno">  372</span>                <span class="keyword">const</span> <a class="code hl_class" href="class_p_a_p_i_1_1p_source_state.html">pSourceState</a>&amp; SrcSt, <span class="comment">///&lt; all other particle attributes are chosen from this source state</span></div>
<div class="line"><span class="lineno">  373</span>                <a class="code hl_typedef" href="namespace_p_a_p_i.html#a8f210e08b253efc043296efeaf9ddda3">pdata_t</a> data = 0           <span class="comment">///&lt; application data to be passed to the birth and death callbacks</span></div>
<div class="line"><span class="lineno">  374</span>    );</div>
<div class="line"><span class="lineno">  375</span> </div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a6595c824cac3dddc9f5d2a92dbf244e3">  376</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">class</span> UnaryFunction&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a6595c824cac3dddc9f5d2a92dbf244e3">ParticleLoop</a>(UnaryFunction f)</div>
<div class="line"><span class="lineno">  377</span>    {</div>
<div class="line"><span class="lineno">  378</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">StartParticleLoop</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PS</a>, <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>);</div>
<div class="line"><span class="lineno">  379</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">std</a>::<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">for_each</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>.<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">get_pgroup_begin</a>(), <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>.<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">get_pgroup_end</a>(), <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">f</a>);</div>
<div class="line"><span class="lineno">  380</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">EndParticleLoop</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PS</a>, <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>);</div>
<div class="line"><span class="lineno">  381</span>    }</div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a5696a31d3ad5f8ce1863b7b3467980dc">  382</a></span>    <span class="keyword">template</span> &lt;<span class="keyword">class</span> ExPol, <span class="keyword">class</span> UnaryFunction&gt; <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#a5696a31d3ad5f8ce1863b7b3467980dc">ParticleLoop</a>(ExPol&amp;&amp; policy, UnaryFunction f)</div>
<div class="line"><span class="lineno">  383</span>    {</div>
<div class="line"><span class="lineno">  384</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">StartParticleLoop</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PS</a>, <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>);</div>
<div class="line"><span class="lineno">  385</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">std</a>::<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">for_each</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">policy</a>, <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>.<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">get_pgroup_begin</a>(), <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>.<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">get_pgroup_end</a>(), <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">f</a>);</div>
<div class="line"><span class="lineno">  386</span>        <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">EndParticleLoop</a>(<a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PS</a>, <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PSh</a>);</div>
<div class="line"><span class="lineno">  387</span>    }</div>
<div class="line"><span class="lineno">  388</span> </div>
<div class="line"><span class="lineno">  389</span><span class="keyword">protected</span>:</div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#a92db77fce6d085d02d46a8c262b0dec7">  390</a></span>    PInternalShadow_t <a class="code hl_variable" href="class_p_a_p_i_1_1_p_context_actions__t.html#a92db77fce6d085d02d46a8c262b0dec7">PSh</a>;                                    <span class="comment">// Shadow copy of some information from PInternalState_t that is used by the inline actions API</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">  391</a></span>    std::shared_ptr&lt;PInternalState_t&gt; <a class="code hl_variable" href="class_p_a_p_i_1_1_p_context_actions__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PS</a>;                     <span class="comment">// The internal API data for this context is stored here.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_p_context_actions__t.html#aff0b6907e8741a16ef627f960272b342">  392</a></span>    <span class="keywordtype">void</span> <a class="code hl_function" href="class_p_a_p_i_1_1_p_context_actions__t.html#aff0b6907e8741a16ef627f960272b342">InternalSetup</a>(std::shared_ptr&lt;PInternalState_t&gt; Sr); <span class="comment">// Calls this after construction to set up the PS pointer</span></div>
<div class="line"><span class="lineno">  393</span>};</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span><span class="comment">/// The Particle System API Context - Your app should have one of these per host thread that will do particle systems concurrently.</span></div>
<div class="line"><span class="lineno">  396</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  397</span><span class="comment">/// This is a complete instance of the Particle API. All API state is stored in the context.</span></div>
<div class="line"><span class="lineno">  398</span><span class="comment">///</span></div>
<div class="line"><span class="lineno">  399</span><span class="comment">/// See the documentation of the base classes for the description of all the API entry points.</span></div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_particle_context__t.html">  400</a></span><span class="keyword">class</span> <a class="code hl_class" href="class_p_a_p_i_1_1_particle_context__t.html">ParticleContext_t</a> : <span class="keyword">public</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_particle_group__t.html">PContextParticleGroup_t</a>, <span class="keyword">public</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_action_list__t.html">PContextActionList_t</a>, <span class="keyword">public</span> <a class="code hl_class" href="class_p_a_p_i_1_1_p_context_actions__t.html">PContextActions_t</a> {</div>
<div class="line"><span class="lineno">  401</span><span class="keyword">public</span>:</div>
<div class="line"><span class="lineno"><a class="line" href="class_p_a_p_i_1_1_particle_context__t.html#acbc0cae769760f4ac4af871761aae98f">  402</a></span>    <a class="code hl_function" href="class_p_a_p_i_1_1_particle_context__t.html#acbc0cae769760f4ac4af871761aae98f">ParticleContext_t</a>(); <span class="comment">/// The context&#39;s default constructor</span></div>
<div class="line"><span class="lineno">  403</span>};</div>
<div class="line"><span class="lineno">  404</span>}; <span class="comment">// namespace PAPI</span></div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span><span class="preprocessor">#</span><span class="preprocessor">endif</span></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html">PAPI::PContextActionList_t</a></div><div class="ttdoc">Action List Calls.</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:40</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_a0330f623cbd0686e4fd84abe6f2a3828"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#a0330f623cbd0686e4fd84abe6f2a3828">PAPI::PContextActionList_t::TimeStep</a></div><div class="ttdeci">void TimeStep(const float new_dt)</div><div class="ttdoc">Specify the time step length.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_a1fd276780b4ea073d187576f2459e1b4"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#a1fd276780b4ea073d187576f2459e1b4">PAPI::PContextActionList_t::CallActionList</a></div><div class="ttdeci">void CallActionList(const int action_list_num)</div><div class="ttdoc">Execute the specified action list on the current particle group.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_a777e90940cf960323ed04aace37315b8"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#a777e90940cf960323ed04aace37315b8">PAPI::PContextActionList_t::GetTimeStep</a></div><div class="ttdeci">float GetTimeStep() const</div><div class="ttdoc">Return the current time step, as set with TimeStep()</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_a7795db5cf91fd9fb837a83054cfe96c3"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#a7795db5cf91fd9fb837a83054cfe96c3">PAPI::PContextActionList_t::Seed</a></div><div class="ttdeci">void Seed(const unsigned int seed)</div><div class="ttdoc">Set the random number seed.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_a93f9538f37bfc3bba040d658fa2847a6"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#a93f9538f37bfc3bba040d658fa2847a6">PAPI::PContextActionList_t::GenActionLists</a></div><div class="ttdeci">int GenActionLists(const int action_list_count=1)</div><div class="ttdoc">Generate a block of empty action lists.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_ab4b17d4e783b9ff2d4f46781a3d7a5ca"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PAPI::PContextActionList_t::PS</a></div><div class="ttdeci">std::shared_ptr&lt; PInternalState_t &gt; PS</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:128</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_abef97a9286180f1e53cb81a5c17e6205"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#abef97a9286180f1e53cb81a5c17e6205">PAPI::PContextActionList_t::DeleteActionLists</a></div><div class="ttdeci">void DeleteActionLists(const int action_list_num, const int action_list_count=1)</div><div class="ttdoc">Delete one or more consecutive action lists.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_aec2d30f3336b2be2ab34ba3cccc55d53"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#aec2d30f3336b2be2ab34ba3cccc55d53">PAPI::PContextActionList_t::NewActionList</a></div><div class="ttdeci">void NewActionList(const int action_list_num)</div><div class="ttdoc">Begin the creation of the specified action list.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_af0ffaad952c3b2df8bc7161deb9f9127"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#af0ffaad952c3b2df8bc7161deb9f9127">PAPI::PContextActionList_t::EndActionList</a></div><div class="ttdeci">void EndActionList()</div><div class="ttdoc">End the creation of a new action list.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_action_list__t_html_aff0b6907e8741a16ef627f960272b342"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_action_list__t.html#aff0b6907e8741a16ef627f960272b342">PAPI::PContextActionList_t::InternalSetup</a></div><div class="ttdeci">void InternalSetup(std::shared_ptr&lt; PInternalState_t &gt; Sr)</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html">PAPI::PContextActions_t</a></div><div class="ttdoc">This class contains the Action API.</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:314</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a13aacda27ea8731db4e9fdbcf9a65687"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a13aacda27ea8731db4e9fdbcf9a65687">PAPI::PContextActions_t::CommitKills</a></div><div class="ttdeci">void CommitKills()</div><div class="ttdoc">Delete particles tagged to be killed by inline P.I.KillOld(), P.I.Sink(), and P.I....</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a1c29fe77db016b32899474911e9c6c60"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a1c29fe77db016b32899474911e9c6c60">PAPI::PContextActions_t::Source</a></div><div class="ttdeci">void Source(const float particle_rate, const pDomain &amp;dom, const pSourceState &amp;SrcSt)</div><div class="ttdoc">Add particles with positions in the specified domain.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a24c3e50da39c97b441a85806128e9065"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a24c3e50da39c97b441a85806128e9065">PAPI::PContextActions_t::Vertex</a></div><div class="ttdeci">void Vertex(const pVec &amp;v, const pSourceState &amp;SrcSt, pdata_t data=0)</div><div class="ttdoc">Add a single particle at the specified location.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a5696a31d3ad5f8ce1863b7b3467980dc"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a5696a31d3ad5f8ce1863b7b3467980dc">PAPI::PContextActions_t::ParticleLoop</a></div><div class="ttdeci">void ParticleLoop(ExPol &amp;&amp;policy, UnaryFunction f)</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:382</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a640597dc6376e993409b6cb331b219b0"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a640597dc6376e993409b6cb331b219b0">PAPI::PContextActions_t::Sort</a></div><div class="ttdeci">void Sort(const pVec &amp;eye, const pVec &amp;look_dir, const bool front_to_back=false, const bool clamp_negative=false)</div><div class="ttdoc">Sort the particles by their projection onto the look vector.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a6595c824cac3dddc9f5d2a92dbf244e3"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a6595c824cac3dddc9f5d2a92dbf244e3">PAPI::PContextActions_t::ParticleLoop</a></div><div class="ttdeci">void ParticleLoop(UnaryFunction f)</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:376</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_a92db77fce6d085d02d46a8c262b0dec7"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#a92db77fce6d085d02d46a8c262b0dec7">PAPI::PContextActions_t::PSh</a></div><div class="ttdeci">PInternalShadow_t PSh</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:390</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_ab4b17d4e783b9ff2d4f46781a3d7a5ca"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PAPI::PContextActions_t::PS</a></div><div class="ttdeci">std::shared_ptr&lt; PInternalState_t &gt; PS</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:391</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_actions__t_html_aff0b6907e8741a16ef627f960272b342"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_actions__t.html#aff0b6907e8741a16ef627f960272b342">PAPI::PContextActions_t::InternalSetup</a></div><div class="ttdeci">void InternalSetup(std::shared_ptr&lt; PInternalState_t &gt; Sr)</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html">PAPI::PContextParticleGroup_t</a></div><div class="ttdoc">This class contains the API calls that operate on particle groups.</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:146</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a0c0eaac8b9d6b1e5d2520173ee936522"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a0c0eaac8b9d6b1e5d2520173ee936522">PAPI::PContextParticleGroup_t::DeathCallback</a></div><div class="ttdeci">void DeathCallback(P_PARTICLE_CALLBACK callback, pdata_t group_data=0)</div><div class="ttdoc">Specify a particle death callback.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a1112f0655c7c1b62f870511b8afef9d7"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a1112f0655c7c1b62f870511b8afef9d7">PAPI::PContextParticleGroup_t::SetWorkingSetSize</a></div><div class="ttdeci">void SetWorkingSetSize(const int set_size_bytes)</div><div class="ttdoc">Set the number of particles that fit in the CPU's cache.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a2875a5464c1810fa11a88e057b56cd84"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a2875a5464c1810fa11a88e057b56cd84">PAPI::PContextParticleGroup_t::BirthCallback</a></div><div class="ttdeci">void BirthCallback(P_PARTICLE_CALLBACK callback, pdata_t group_data=0)</div><div class="ttdoc">Specify a particle creation callback.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a49aab2a3887103f5bbeccebef529a31b"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a49aab2a3887103f5bbeccebef529a31b">PAPI::PContextParticleGroup_t::DeleteParticleGroups</a></div><div class="ttdeci">void DeleteParticleGroups(const int p_group_num, const int p_group_count=1)</div><div class="ttdoc">Delete one or more consecutive particle groups.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a75cdf009111297f02b803ac08d0a4213"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a75cdf009111297f02b803ac08d0a4213">PAPI::PContextParticleGroup_t::GetParticlePointer</a></div><div class="ttdeci">size_t GetParticlePointer(const float *&amp;ptr, size_t &amp;stride, size_t &amp;pos3Ofs, size_t &amp;posB3Ofs, size_t &amp;size3Ofs, size_t &amp;vel3Ofs, size_t &amp;velB3Ofs, size_t &amp;color3Ofs, size_t &amp;alpha1Ofs, size_t &amp;age1Ofs, size_t &amp;up3Ofs, size_t &amp;rvel3Ofs, size_t &amp;upB3Ofs, size_t &amp;mass1Ofs, size_t &amp;data1Ofs)</div><div class="ttdoc">Return a pointer to particle data stored in API memory.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_a7c117f3b121b6709021ecf4036a3be53"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#a7c117f3b121b6709021ecf4036a3be53">PAPI::PContextParticleGroup_t::CopyGroup</a></div><div class="ttdeci">void CopyGroup(const int p_src_group_num, const size_t index, const size_t copy_count)</div><div class="ttdoc">Copy particles from the specified group into the current group.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_ab4b17d4e783b9ff2d4f46781a3d7a5ca"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab4b17d4e783b9ff2d4f46781a3d7a5ca">PAPI::PContextParticleGroup_t::PS</a></div><div class="ttdeci">std::shared_ptr&lt; PInternalState_t &gt; PS</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:287</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_ab94327f011a4f3713cb0941abe0da63f"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ab94327f011a4f3713cb0941abe0da63f">PAPI::PContextParticleGroup_t::GetMaxParticles</a></div><div class="ttdeci">size_t GetMaxParticles()</div><div class="ttdoc">Return the maximum number of particles allowed in the current group.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_abbcc2cd2340624560e3b2cf6e9d5cb0c"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#abbcc2cd2340624560e3b2cf6e9d5cb0c">PAPI::PContextParticleGroup_t::GetGroupCount</a></div><div class="ttdeci">size_t GetGroupCount()</div><div class="ttdoc">Returns the number of particles existing in the current group.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_ac89a60f3740531bba39533bf75d3e990"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ac89a60f3740531bba39533bf75d3e990">PAPI::PContextParticleGroup_t::SetMaxParticles</a></div><div class="ttdeci">void SetMaxParticles(const size_t max_count)</div><div class="ttdoc">Change the maximum number of particles in the current group.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_ad6b48bdc6e998672ff0df1c4f581230b"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#ad6b48bdc6e998672ff0df1c4f581230b">PAPI::PContextParticleGroup_t::GenParticleGroups</a></div><div class="ttdeci">int GenParticleGroups(const int p_group_count=1, const size_t max_particles=0)</div><div class="ttdoc">Create particle groups, each with a maximum of max_particles.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_af1ddcf82756a87ded68e545cad3e8d90"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af1ddcf82756a87ded68e545cad3e8d90">PAPI::PContextParticleGroup_t::CurrentGroup</a></div><div class="ttdeci">void CurrentGroup(const int p_group_num)</div><div class="ttdoc">Change which group is current.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_af589e7bdf0c3280bce5442782563ae6b"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#af589e7bdf0c3280bce5442782563ae6b">PAPI::PContextParticleGroup_t::GetParticles</a></div><div class="ttdeci">size_t GetParticles(const size_t index, const size_t count, float *position, const bool getAlpha, float *color=NULL, float *vel=NULL, float *size=NULL, float *age=NULL)</div><div class="ttdoc">Copy particles from the current group to application memory.</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_p_context_particle_group__t_html_aff0b6907e8741a16ef627f960272b342"><div class="ttname"><a href="class_p_a_p_i_1_1_p_context_particle_group__t.html#aff0b6907e8741a16ef627f960272b342">PAPI::PContextParticleGroup_t::InternalSetup</a></div><div class="ttdeci">void InternalSetup(std::shared_ptr&lt; PInternalState_t &gt; Sr)</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_particle_context__t_html"><div class="ttname"><a href="class_p_a_p_i_1_1_particle_context__t.html">PAPI::ParticleContext_t</a></div><div class="ttdoc">The Particle System API Context - Your app should have one of these per host thread that will do part...</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:400</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1_particle_context__t_html_acbc0cae769760f4ac4af871761aae98f"><div class="ttname"><a href="class_p_a_p_i_1_1_particle_context__t.html#acbc0cae769760f4ac4af871761aae98f">PAPI::ParticleContext_t::ParticleContext_t</a></div><div class="ttdeci">ParticleContext_t()</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1p_domain_html"><div class="ttname"><a href="class_p_a_p_i_1_1p_domain.html">PAPI::pDomain</a></div><div class="ttdoc">A representation of a region of space.</div><div class="ttdef"><b>Definition:</b> pDomain.h:55</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1p_source_state_html"><div class="ttname"><a href="class_p_a_p_i_1_1p_source_state.html">PAPI::pSourceState</a></div><div class="ttdoc">These functions set the current state needed by Source() and Vertex() actions.</div><div class="ttdef"><b>Definition:</b> pSourceState.h:21</div></div>
<div class="ttc" id="aclass_p_a_p_i_1_1p_vec_html"><div class="ttname"><a href="class_p_a_p_i_1_1p_vec.html">PAPI::pVec</a></div><div class="ttdoc">A single-precision floating point three-vector.</div><div class="ttdef"><b>Definition:</b> pVec.h:63</div></div>
<div class="ttc" id="anamespace_p_a_p_i_html"><div class="ttname"><a href="namespace_p_a_p_i.html">PAPI</a></div><div class="ttdoc">PAPIClasses.h.</div><div class="ttdef"><b>Definition:</b> pAPIContext.h:16</div></div>
<div class="ttc" id="anamespace_p_a_p_i_html_a8f210e08b253efc043296efeaf9ddda3"><div class="ttname"><a href="namespace_p_a_p_i.html#a8f210e08b253efc043296efeaf9ddda3">PAPI::pdata_t</a></div><div class="ttdeci">unsigned int pdata_t</div><div class="ttdef"><b>Definition:</b> pDeclarations.h:16</div></div>
<div class="ttc" id="astruct_p_a_p_i_1_1_particle__t_html"><div class="ttname"><a href="struct_p_a_p_i_1_1_particle__t.html">PAPI::Particle_t</a></div><div class="ttdef"><b>Definition:</b> pParticle.h:18</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
